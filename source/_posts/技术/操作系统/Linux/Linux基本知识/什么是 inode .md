---
date: 2021-03-25 22:02:05
updated: 2021-03-25 22:02:05
title: 什么是 inode
index_img: /gallery/2021-08-23-19-18-20.png
tags:
  - Linux

categories:
  - Linux
---

## iNode

- 索引节点，它用来存放档案及目录的基本信息，包含时间、档名、使用者及群组等
- inode 是 UNIX 操作系统中的一种数据结构，其本质是结构体，它包含了与文件系统中各个文件相关的一些重要信息。在 UNIX 中创建文件系统时，同时将会创建大量的 inode 。通常，文件系统磁盘空间中大约百分之一空间分配给了 inode 表

### iNode 表

- inode 表包含一份清单，其中列出了对应文件系统的所有 inode 编号。当用户搜索或者访问一个文件时，UNIX 系统通过 inode 表查找正确的 inode 编号。在找到 inode 编号之后，相关的命令才可以访问该 inode ，并对其进行适当的更改。
- 使用 vi 来编辑一个文件。当您键入 vi <filename> 时，在 inode 表中找到 inode 编号之后，才允许您打开该 inode
- 在 vi 的编辑会话期间，更改了该 inode 中的某些属性，当您完成操作并键入 :wq 时，将关闭并释放该 inode 。
- 如果两个用户试图对同一个文件进行编辑， inode 已经在第一个编辑会话期间分配给了另一个用户 ID (UID)，因此第二个编辑任务就必须等待，直到该 inode 释放为止。

### iNode 结构

```vim
● inode 编号
● 用来识别文件类型，以及用于 stat C 函数的模式信息
● 文件的链接数目
● 属主的ID (UID)
● 属主的组 ID (GID)
● 文件的大小
● 文件所使用的磁盘块的实际数目
● 最近一次修改的时间
● 最近一次访问的时间
● 最近一次更改的时间
# 以上所列举的信息对于文件来说非常重要，并且在 UNIX 中频繁使用。如果没有这些信息，那么文件将被认为遭到破坏和不可用。
```

- 在 UNIX 中，目录本身就是文件，只是在它们的 inode 中使用了一些附加的设置
- 目录 本质上就是一个包含了其他文件的文件
- 另外，其模式信息中设置了一些相应的标志，以告知系统该文件实际上是一个目录。

### iNode 使用

- UNIX 中创建一个文件系统时，将为 inode 表分配大约百分之一的总磁盘空间
- 每次在文件系统中创建一个文件时，都会为该文件分配一个 inode
- 您可以使用 stat 找到特定文件的索引编号，以及其他的 inode 项目，如权限、文件类型、UID、GID、链接的数目（非符号链接）、文件大小和最近一次更新、最近一次修改以及最近一次访问的时间戳。

![error_loading](/gallery/2021-03-25-21-58-00.png)

- df -ih 可以查看对对应的信息 、

![error_loading](/gallery/2021-03-25-21-54-46.png)

# 一些关于文件 io 的操作

- [ ] 磁盘 oi
  - [ ] stat
  - [ ] fsck
  - [ ] ls
  - [ ] df
  - [ ] cd
  - [ ] mount
  - [ ] umount
  - [ ] remount
