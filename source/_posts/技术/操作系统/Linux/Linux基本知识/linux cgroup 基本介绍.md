---
date: 2021-03-25 13:57:22
updated: 2021-03-25 13:57:22
title: linux cgroup 基本介绍
index_img: /gallery/2021-08-23-19-18-20.png
tags:
  - Linux

categories:
  - Linux
---

---

这个部分要认真学，现在没状态，之后写
2021.3.25

---

# 基本介绍

- cgroups，其名称源自控制组群（英语：control groups）的简写
- 是 Linux 内核的一个功能，用来限制、控制与分离一个进程组的资源（如 CPU、内存、磁盘输入输出等）。
- cgroups 是 Linux 内核提供的一种可以限制单个进程或者多个进程所使用资源的机制，可以对 cpu，内存等资源实现精细化的控制，目前越来越火的轻量级容器 Docker 就使用了 cgroups 提供的资源限制能力来完成 cpu，内存等部分的资源控制。
- 另外，开发者也可以使用 cgroups 提供的精细化控制能力，限制某一个或者某一组进程的资源使用。比如在一个既部署了前端 web 服务，也部署了后端计算模块的八核服务器上，可以使用 cgroups 限制 web server 仅可以使用其中的六个核，把剩下的两个核留给后端计算模块。

## 功能

- cgroups 的一个设计目标是为不同的应用情况提供统一的接口，从控制单一进程（像 nice）到操作系统层虚拟化
  - 资源限制：组可以被设置不超过设定的内存限制；这也包括虚拟内存。
  - 优先级：一些组可能会得到大量的 CPU 或磁盘 IO 吞吐量
  - 结算：用来度量系统实际用了多少资源。
  - 控制：冻结组或检查点和重启动

## 相关概念介绍

- 任务(task): 在 cgroup 中，任务就是一个进程。
- 控制组(control group): cgroup 的资源控制是以控制组的方式实现，控制组指明了资源的配额限制。进程可以加入到某个控制组，也可以迁移到另一个控制组。
- 层级(hierarchy): 控制组有层级关系，类似树的结构，子节点的控制组继承父控制组的属性(资源配额、限制等)。
- 子系统(subsystem): 一个子系统其实就是一种资源的控制器，比如 memory 子系统可以控制进程内存的使用。子系统需要加入到某个层级，然后该层级的所有控制组，均受到这个子系统的控制。

# Cgroup 层级结构

![error_loading](/gallery/2021-03-25-14-22-50.png)

# 参考资料

- [浅谈 Linux Cgroups 机制](https://zhuanlan.zhihu.com/p/81668069)
- [美团技术介绍](https://tech.meituan.com/2015/03/31/cgroups.html)
