---
date: 2021-03-19 15:43:58
updated: 2021-03-19 15:43:58
title: 什么是分区
index_img: /gallery/2021-08-23-20-13-43.png

tags:
  - System

categories:
  - System

---

# 分区是什么

- 磁盘分区或磁盘切片是在辅助存储器上创建一个或多个区域，以便可以分别管理每个区域，这些区域称为分区
- 通常这是创建文件系统的第一步
- 磁盘将有关分区的位置和大小的信息存储在一个称为分区表的区域中
- 操作系统会在对磁盘分区操作之前读取这个表，每个分区在操作系统中现实为“逻辑”磁盘。
- 将用户数据与系统数据分开可以防止系统分区变满并使系统无法使用

## [分区的类型](https://en.wikipedia.org/wiki/Partition_type)

- 在历史上使用的主启动记录（MBR）分区方案
- 从 2010 年代中期开始，大多数新计算机都改用 GUID 分区表（GPT）分区方案
- 上面是设计到分区表
- 分区类型由在其分区表条目中找到的 1 字节代码标识
- 其中一些代码（例如 0x05 和 0x0F）可用于指示扩展分区的存在
- 操作系统的引导加载程序（用于检查分区表）使用大多数分区来决定分区是否包含可装入/访问的用于读取或写入数据的文件系统。

### 主分区

- 这里涉及到文件系统
- 主分区包含一个文件系统
- 在 DOS 和 Microsoft Windows 系统的所有早期版本中，Microsoft 要求将其称为系统分区的第一个分区。
- 从 Windows 95 开始的所有 Windows 操作系统都可以位于（几乎）任何分区上
- 但是启动文件（io.sys，bootmgr，ntldr 等）必须位于主分区上。
- 主分区的分区类型代码可以对应于其中包含的文件系统（例如，0x07 表示 NTFS
- 也可以指示该分区具有特殊用途（例如，代码 0x82 通常表示 Linux 交换分区）
- 尽管 Linux 操作系统可以识别许多不同的文件系统（ext4，ext3，ext2，ReiserFS 等），但它们始终使用相同的分区类型代码：0x83（Linux 本机文件系统）。

### 扩展分区

- 下面涉及到分区表
- HDD 可能仅包含一个扩展分区，但是该扩展分区可以细分为多个逻辑分区
- 然后，DOS / Windows 系统可以为每个逻辑分区分配一个唯一的驱动器号
- GUID 分区表（GPT）仅具有主分区，没有扩展分区和逻辑分区。
- 但随着硬盘越来越大，人们需要更多的分区，于是发明了扩展分区
- 扩展分区的意思就是把之前的 4 个分区中的一个当做扩展部分，不再记录分区信息，换而记录另一张 分区表的位置

![error_loading](/gallery/2021-03-19-16-30-24.png)

# 分区方案介绍

## DOS, Windows, and OS/2

- 对于 DOS，Microsoft Windows 和 OS / 2，一种常见的做法是为活动文件系统使用一个主分区 （就像 C 盘是系统盘）
- 该分区将包含操作系统，页面/交换文件，所有实用程序，应用程序和用户数据
- 在大多数 Windows 家用计算机上，驱动器号 C：通常分配给该主分区
- HDD 上可能存在其他分区，这些分区在驱动器上可能不可见，例如恢复分区或带有诊断工具或数据的分区。
- Microsoft Windows 2000，XP，Vista 和 Windows 7 包括一个“磁盘管理”程序，该程序允许创建，删除和调整 FAT 和 NTFS 分区的大小
- Windows Vista 和 Windows 7 中的 Windows 磁盘管理器使用 1 MB 的分区对齐方案，该方案基本上与 Windows 2000，XP，OS / 2，DOS 以及许多其他操作系统不兼容。

## 类 Unix 系统

- 在基于 Unix 和类似 Unix 的操作系统（例如 Linux，macOS，BSD 和 Solaris）上
- 可以在磁盘设备上使用多个分区。每个分区都可以使用文件系统或交换分区进行格式化。
- 多个分区允许为/ boot，/ tmp，/ usr，/ var 或/ home 之类的目录分配自己的文件系统。这样的方案具有许多优点：
  - 如果一个文件系统挂了，不会影响其他的文件系统/分区
  - 可以使用不同的参数（例如，只读）或禁用 setuid 文件的执行来挂载特定的文件系统。
  - 使用非系统文件系统上所有可用空间的失控程序不会填满关键文件系统。
  - 将诸如文档之类的用户数据与系统文件分开可以使系统更新，从而降低了干扰数据的风险。
- Linux 系统的常见最小配置是使用三个分区：
  - 一个分区用于保存安装在'/'（根目录）上的系统文件
  - 一个分区用于保存用户配置文件和安装在/ home（主目录）上的数据
  - 以及一个交换分区 swap

## 多系统

- 多重引导系统是计算机，用户可以在其中引导到存储在单独的存储设备或同一存储设备的单独分区中的两个或多个不同的操作系统
- 在这样的系统中，启动时的菜单可以选择启动/启动哪个 OS（一次仅加载一个 OS）。

## swap 分区

- swap 分区通常被称为交换分区，这是一块特殊的硬盘空间
- 即当实际内存不够用的时候，操作系统会从内存中取出一部分暂时不用的数据，放在交换分区中
- 从而为当前运行的程序腾出足够的内存空间。
- 当内存不够用时，我们使用 swap 分区来临时顶替。
- 使用 swap 交换分区，显著的优点是，通过操作系统的调度，应用程序实际可以使用的内存空间将远远超过系统的物理内存
