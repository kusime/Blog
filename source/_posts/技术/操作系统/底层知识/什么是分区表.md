---
date: 2021-03-19 16:16:08
updated: 2021-03-19 16:16:08
title: 什么是分区表
index_img: /gallery/2021-08-23-20-13-43.png

tags:
  - System

categories:
  - System

---

# [分区表介绍](https://zh.wikipedia.org/wiki/%E5%88%86%E5%8C%BA%E8%A1%A8)

- 分区表是将大表的数据分成称为分区的许多小的子集
  - 简单理解就是一大块蛋糕分成几块小蛋糕
- 类型有 FAT16,FAT32,NTFS,exFAT,Ext2/3/4,HFS+,VMFS （许多小的子集）
  - 这个其实好像是文件系统来着
- 分区表是指明分区的位置和范围，大小的一个东西

## MBR (Master Boot Record)

- 主引导记录（MBR，Master Boot Record）是硬盘的第一个扇区，即 C/H/S 地址的 0 柱面 0 磁头 1 扇区，也叫做 MBR 扇区
- 是计算机开机以后访问硬盘时所必须要读取的第一个扇区
- 其后是 4 个 16 字节的“磁盘分区表”（DPT），以及 2 字节的结束标志（55AA）
- 主引导扇区记录着硬盘本身的相关信息以及硬盘各个分区的大小及位置信息
- 如果它受到破坏，硬盘上的基本数据结构信息将会丢失
- 主引导扇区内的信息可以通过任何一种基于某种操作系统的分区软件写入
- 真正留给分区表的只有 64 个字节
- 因为分区表的大小限制，导致 MBR 分区表只能记录 4 个分区。

### 组成

- 引导程序占用其中的前 446 字节（偏移 0 ～ 1BDH）
- 随后的 64 字节（偏移 1BEH ～ 1FDH）为 DPT（Disk Partition Table，硬盘分区表）
- 最后的两个字节“55 AA”（偏移 1FEH ～ 1FFH）是结束标志

### 工作流程

- 将磁盘的 0 柱面、0 磁头、1 扇区的主引导记录内容读入内存指定单元 其首址为 0:7C00 开始的区域, 并执行 MBR 程序段
- 主引导记录优先于所有操作系统被调入内存的指令, 并发挥主导作用
- 最后把控制权交给主分区 (活动分区) 内操作系统, 并让主分区信息来管理硬盘。
- 可见, 主引导记录不依赖任何操作系统, 且硬盘引导程序为可变的, 因此完全可以实现多系统共存 (但最多 4 个系统)

### 主要功能

- (1) 首先检查硬盘中分区表是否完好
- (2) 从分区表查找可引导的“活动”分区
- (3) 将活动分区中第一逻辑扇区数据加载到内存中。在 DOS 分区中, 该扇区内容被称为 DOS 引导记录, 简称 DBR。

![error_loading](/gallery/2021-03-19-16-22-50.png)

# GPT (全局唯一标识分区表)

- 是指全局唯一标示磁盘分区表格式
- 它是可扩展固件接口（EFI）标准（被 Intel 用于替代个人计算机的 BIOS）的一部分
- 用于替代 BIOS 系统中的以 32bits 来存储逻辑块地址和大小信息的主引导记录（MBR）分区表。
- 对于那些扇区为 512 字节的磁盘，MBR 分区表不支持容量大于 2.2TB（2.2 ×1012 字节）的分区

## 特点

- 在 MBR 硬盘中，分区信息直接存储于主引导记录（MBR）中（主引导记录中还存储着系统的引导程序）
- 但在 GPT 硬盘中，分区表的位置信息储存在 GPT 头中
- 但出于兼容性考虑，硬盘的第一个扇区仍然用作 MBR，之后才是 GPT 头
- 跟现代的 MBR 一样，GPT 也使用逻辑区块地址（LBA）取代了早期的 CHS 寻址方式。
- 为了减少分区表损坏的风险，GPT 在硬盘最后保存了一份分区表的副本。

## 分区方法

- GPT 能够保证磁盘分区的 GUID 唯一性
- 所以 GPT 不允许将整个硬盘进行复制，从而保证了磁盘内数据的安全性
- GPT 分区的创建或者更改其实并不麻烦，但是一块硬盘如果想从 MBR 分区转换成 GPT 分区的话，就会丢失硬盘内的所有数据。

## [逻辑块寻址](https://baike.baidu.com/item/%E9%80%BB%E8%BE%91%E5%9D%97%E5%AF%BB%E5%9D%80/18435165)

- 逻辑块是指存储在磁盘或者磁带上的数据块,该数据块具有一个用以检索或重写的地址。
- 经常需要将提供给主机的逻辑块地址转换成相应的数据实际存储的物理介质地址。

## [CHS 寻址模式](https://baike.baidu.com/item/CHS/3794705)

- CHS，是 FDISK 在分区期间所需磁盘信息
- ① CHS 寻址模式将硬盘划分为磁头（Heads）、柱面(Cylinder)、扇区(Sector)。
  - △ 磁头(Heads)：每张磁片的正反两面各有一个磁头，一个磁头对应一张磁片的一个面。因此，用第几磁 头就可以表示数据在哪个磁面。
  - △ 柱面(Cylinder)：所有磁片中半径相同的同心磁道构成“柱面"，意思是这一系列的磁道垂直叠在一起，就形成一个柱面的形状。简单地理解，柱面数=磁道数。
  - △ 扇区(Sector)：将磁道划分为若干个小的区段，就是扇区。虽然很小，但实际是一个扇子的形状，故称为扇区。每个扇区的容量为 512 字节。

# 一些我的理解

- 硬盘就是硬盘，就是存储数据的，但是对应的需要组织输入如何存储
- 是分区表决定着分区，所以操作分区表可以对磁盘分区进行操作
