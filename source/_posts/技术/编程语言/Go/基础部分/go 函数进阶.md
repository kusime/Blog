---
date: 2021-03-28 11:49:54
updated: 2021-03-28 11:49:54
title: go 函数进阶
index_img: /gallery/2021-08-23-21-59-40.png
tags: 
  - Golang

categories:
  -  Golang

---

## [指针传值](/posts/code/go/函数/指针传值.go)

- 这个部分和 C 语言的指针传值是一样的
- 只不过是语法声明的区别

- 优点

  - 传指针可以让多个函数操作同一个对象
  - 传指针很轻量 (8 Byte)
    - 普通的传输因为传递的是形式参数
    - 每个参数都会复制一份的，所以如果参数大的时候
    - 会降低效率的
    - channel,slice,map 都是指针类型
    - 类似 C 语言的数组名字，其实就是指针的意思
  - 可以直接在函数内部修改数值，不用 return 返回

- 缺点
  - 实际开发中，直接传递指针可能会发生不确定的事情
  - 最好是对每个引用指针的打个注释明确的指明这个引用是干啥的

## [defer 研究](/posts/code/go/函数/返回值.go)

- defer 和 return 的关系应该是
  - return 会在 defer 语句之前运行
  - 一个代码块里面会有多个 defer 语句
  - 然后 defer 语句会逆序运行
- 可以在返回值声明要返回的变量
  - 然后 defer 就可以修改对应的数据

### [代码跟踪](/posts/code/go/函数/返回值.go)

- 这个是说明 defer 的一点作用
- 总之，只要记住，defer 语句的运行顺序
- 可以实现会函数跟踪检查，以及修改 已经被 return 后的数值
- 以及减少重复的代码（比如打开文件）

# 提示

- 学习完 接口 ， 结构体
- 之后再来学这个部分

## 错误

- Golang 没有 Java 的异常机制
- 所以 go 语言不可以抛出异常，取而代之的是 panic 和 recover 机制
- panic 是最后的手段，代码中应该尽量没有 panic 的语句
  - panic 是强大的工具，但是要适当的使用它

### Go 是如何面对函数错误的

- error 是一个用来处理错误的接口
- 一般把 error 作为多返回值的最后一个数值返回
- 一般都是没错误的时候，err 为 nil 就是没有错误，然后继续运行代码
  - 如果 err 不为 nil 的时候就是进行错误处理
- 这里涉及 结构体 ，接口，所以学完之后的东西之后再回来学这个东西
- 这里错误处理主要的作用就是能让我们获得关于错误的更多信息
- 用户可以自定义错误类型，以及定义错误发生的时候返回哪一些数据

```go
type error interface{
  Error() string
}

----

func Foo(param int ) ( n int , err error) {
  // ! ...
}
```

### panic

### recover    
