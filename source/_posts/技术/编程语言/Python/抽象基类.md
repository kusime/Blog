---
title: 抽象基类
index_img: /gallery/2022-01-14-13-01-48.png
date: 2022-01-20 19:50:51
updated: 2022-01-20 19:50:51
tags:
  - Python
categories:
  - Python
---

# 抽象基类

一些相关的基础知识

## duck-typing -- 鸭子类型

指一种编程风格，它并不依靠查找对象类型来确定其是否具有正确的接口，而是直接调用或使用其方法或属性（“看起来像鸭子，叫起来也像鸭子，那么肯定就是鸭子。”）由于强调接口而非特定类型，设计良好的代码可通过允许多态替代来提升灵活性。鸭子类型避免使用 type() 或 isinstance() 检测。(但要注意鸭子类型可以使用 抽象基类 作为补充。) 而往往会采用 hasattr() 检测或是 EAFP 编程

## abstract base class -- 抽象基类

抽象基类简称 ABC，是对 duck-typing 的补充，它提供了一种定义接口的新方式，相比之下其他技巧例如 hasattr() 显得过于笨拙或有微妙错误（例如使用 魔术方法）。ABC 引入了虚拟子类，这种类并非继承自其他类，但却仍能被 isinstance() 和 issubclass() 所认可；详见 abc 模块文档。Python 自带许多内置的 ABC 用于实现数据结构（在 collections.abc 模块中）、数字（在 numbers 模块中）、流（在 io 模块中）、导入查找器和加载器（在 importlib.abc 模块中）。你可以使用 abc 模块来创建自己的 ABC。


## 解耦

耦合是指两个或两个以上的体系或两种运动形式间通过相互作用而彼此影响以至联合起来的现象。 解耦就是用数学方法将两种运动 <font color="#FF0000">**分离开来处理问题**</font> ，常用解耦方法就是忽略或简化对所研究问题影响较小的一种运动，只分析主要的运动。

## Mixin 的概念

{% note success %}
https://zhuanlan.zhihu.com/p/95857866
{% endnote %}


Mixin 即 Mix-in，常被译为“混入”，是一种编程模式，在 Python 等面向对象语言中，通常它是实现了某种功能单元的类，用于被其他子类继承，将功能组合到子类中,利用 Python 的多重继承，子类可以继承不同功能的 Mixin 类，按需动态组合使用。

当多个类都实现了同一种功能时，这时应该考虑将该功能抽离成 Mixin 类。

关键词:

    <font color="#FF0000">**多重继承,方法混合,特性(功能)叠加**</font>


### 举个例子


![图片描述](/gallery/2022-01-20-20-25-41.png)




# ABC，Abstract Base Class（抽象基类）[博主解释]+ 文档补充

ABC，Abstract Base Class（抽象基类），主要定义了基本类和最基本的抽象方法，可以为子类定义共有的API，不需要具体实现。相当于是Java中的接口或者是抽象类

抽象基类可以不实现具体的方法而是将其留给派生类实现。（当然也可以实现，只不过子类如果想调用抽象基类中定义的方法需要使用super()）

抽象基类提供了逻辑和实现 <font color="#FF0000">**解耦**</font> 的能力，即在不同的模块中通过抽象基类来调用，可以用最精简的方式展示出代码之间的逻辑关系，让模块之间的依赖清晰简单。同时， <font color="#FF0000">**一个抽象类可以有多个实现**</font> ，让系统的运转更加灵活。而针对抽象类的编程，让每个人可以关注当前抽象类，只关注其方法和描述，而不需要考虑过多的其他逻辑，这对协同开发有很大意义。极简版的抽象类实现，也让代码可读性更高。


### 直接继承

直接继承抽象基类的子类就没有这么灵活，抽象基类中可以声明”抽象方法“和“抽象属性”，只有完全覆写（实现）了抽象基类中的“抽象”内容后，才能被实例化，而虚拟子类则不受此影响。

### 虚拟子类

将其他的类”注册“到抽象基类下当虚拟子类（调用register方法），虚拟子类的好处是你实现的第三方子类不需要直接继承自基类，可以实现抽象基类中的部分API接口，也可以根本不实现，但是issubclass(), issubinstance()进行判断时仍然返回真值。

#### class abc.ABCMeta

用于定义抽象基类（ABC）的元类。

使用该元类以创建抽象基类。抽象基类可以像 mix-in 类一样直接被子类继承。你也可以将不相关的具体类（包括内建类）和抽象基类注册为“抽象子类” —— 这些类以及它们的子类会被内建函数 `issubclass()`  <font color="#FF0000">**识别为对应的抽象基类的子类**</font> ，但是该抽象基类不会出现在其 `MRO（Method Resolution Order，方法解析顺序）`中，抽象基类中实现的方法也不可调用(即使通过 `super()` 调用也不行)

使用 ABCMeta 作为元类创建的类含有如下方法：

##### register(subclass)

![图片描述](/gallery/2022-01-20-20-29-58.png)

![图片描述](/gallery/2022-01-20-20-31-01.png)



##### 示例代码

